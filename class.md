# 类

## 成员

**C++11** `sizeof` 可以使用域运算符获取类成员大小. 

定义在类内部的函数是隐式 `inline`.

使用 `struct` 与 `class` 唯一区别是默认访问权限.

`mutable` 关键字声明变量永不为 const, const 成员函数可以改变.

一个 const 成员函数如果以引用的形式返回 `*this`, 返回的类型是常量引用.

建议对于公用代码使用私有功能函数.

静态数据成员可以是不完全类型, 可以是它所属的类类型.

聚合类：所有成员 public, 没有定义构造函数 类内初始值 基类 虚函数.
可以提供初始值列表初始化.

## 构造

**C++11** 类内初始值

**C++11** 在默认构造函数声明后 `= default` 使编译器生成构造函数.

**C++11** 委托构造函数： `class(): another_constructor(param) {}`

初始值列表构造函数中, 成员初始化顺序与类定义中出现的顺序一致,而不是列表中的顺序.


## 初始化

"most vexing parse", 解决：初始化列表 

```cpp
MyClass obj(); //声明了构造函数而非对象
MyClass obj;   //对象
MyClass obj{}; //对象
```

`explicit` 关键字对只有一个实参的类内构造函数禁止隐式转换, 禁止拷贝初始化.

接受容量参数的 `vector` 构造函数是 `explicit` 的, 接受单 `const char*` 的 `string` 构造函数不是.


## `constexpr`

字面值类型类可能含有 `constexpr` 函数成员（隐式 const）.

数据成员都是字面值类型的聚合类是字面值常量类.
（或者满足 1. 数据成员都是字面值类型 2. 至少含有一个 `constexpr` 构造函数 3. 类内初始值是常量表达式(内置类型)或有 `constexpr` 构造函数(类类型) 3.  使用默认析构函数）

`constexpr` 构造函数体一般为空.

可以为静态成员提供 const 类内初始值, 要求静态成员必须是字面值常量类型 `constexpr`.

即使一个常量静态数据成员在类内部被初始化了, 通常也应在类外部定义一下.


## 异常类

异常类 `what()` 返回 C like字符串

`exception` 头定义通用类。`stdexcept` 头定义异常类. `new `头定义 `bad_alloc`. 

`type_info` 头定义 `bad_cast`.

